<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Random Task</title>

  <style>
    body {
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background: #f5f5f5;
    }
    #box {
      background: white;
      padding: 25px;
      box-shadow: 0 3px 12px rgba(0,0,0,0.12);
      border-radius: 12px;
      text-align: center;
      width: 80%;
      max-width: 400px;
    }
    #task {
      font-size: 22px;
      margin-bottom: 20px;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    #save { background: #4caf50; color: white; }
    #delete { background: #e53935; color: white; }
  </style>

</head>
<body>

<div id="box">
  <div id="task">Loading...</div>
  <button id="save">Save for Later</button>
  <button id="delete">Delete</button>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyC0E2p9EG6hYko9B3Bi7x8K34BP5E3Ir7QVTKSVToe-1zpNDGYB18gVl_w6XdC6jmx/exec";

// Load a random task
async function loadTask() {
  const res = await fetch(API_URL);
  const data = await res.json();

  window.currentTask = data.task;

  document.getElementById('task').textContent =
    data.task ? data.task : "No pending tasks left!";
}

async function updateTask(action) {
  if (!window.currentTask) return;

  await fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({
      action: action,
      task: window.currentTask
    }),
    headers: { "Content-Type": "application/json" }
  });

  // Reload new task
  loadTask();
}

// Button handlers
document.getElementById("delete").onclick = () => updateTask("delete");
document.getElementById("save").onclick = () => updateTask("save");

// Initial load
loadTask();
</script>

</body>
</html>


